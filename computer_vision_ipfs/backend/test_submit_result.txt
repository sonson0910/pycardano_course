python : Γ¥î Failed to submit transaction: {'error': 'Bad Request', 'message': '{"contents":{"contents":["DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or 
indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or 
indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or 
indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")"],"tag":"TxCmdTxReadError"},"tag":"TxSubmitFail"}', 'status_code': 400}
At line:1 char:102
+ ... computer_vision_ipfs\backend"; python test_create_did.py 2>&1 | Out-F ...
+                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (Γ¥î Failed to s...tus_code': 400}:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
Γ¥î Failed to create DID: {'error': 'Bad Request', 'message': '{"contents":{"contents":["DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley 
Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" 
(DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 
\\"expected list len or indef\\")"],"tag":"TxCmdTxReadError"},"tag":"TxSubmitFail"}', 'status_code': 400}
Traceback (most recent call last):
  File "D:\venera\cardano\pycardano_course\computer_vision_ipfs\backend\test_create_did.py", line 77, in test_create_did
    tx_hash = did_manager.create_did(did_id, face_ipfs_hash)
  File "D:\venera\cardano\pycardano_course\computer_vision_ipfs\backend\app\blockchain\did_manager.py", line 410, in create_did
    submitted_tx_hash = self.cardano.submit_transaction(tx)
  File "D:\venera\cardano\pycardano_course\computer_vision_ipfs\backend\app\blockchain\cardano_client.py", line 186, in submit_transaction
    submitted_tx_hash = self.client.transaction_submit(temp_file)
  File "C:\Users\Admin\anaconda3\Lib\site-packages\blockfrost\utils.py", line 66, in error_wrapper
    raise ApiError(request_response)
blockfrost.utils.ApiError: {'error': 'Bad Request', 'message': '{"contents":{"contents":["DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure 
\\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" 
(DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 
\\"expected list len or indef\\")"],"tag":"TxCmdTxReadError"},"tag":"TxSubmitFail"}', 'status_code': 400}

================================================================================
TEST: CREATE DID SERVICE
================================================================================

[1/5] Initializing CardanoClient...
   Γ£à CardanoClient initialized
   - Network: Cardano Preprod Testnet

   Loading wallet...
   Γ£à Wallet loaded: addr_test1vpx302mqde...

[2/5] Initializing DIDManager...
   Γ£à DIDManager initialized
   - Storage location: ./dids_registry.json

[3/5] Checking wallet balance...
   Γ£à Wallet ready
   - UTxOs available: 2
   - Total balance: 9982.28 ADA

[4/5] Creating DID...
   - DID ID: test-did-1761086058
   - IPFS Hash: Qmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
[DEBUG] create_did() called with did_id=test-did-1761086058
[DEBUG] owner_address=addr_test1vpx302mqdefht0wly42wlpjmd2rm7xr85j6sgvej8pywusc38sglh
[DEBUG] datum created: DIDDatum(did_id=b'eedf0b7f-29c', face_ipfs_hash=b'Qmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', owner=b'\xadj>\xd7*\xdcaO\xf5\xdc\xcd\x90\x9a\xce\xa2\xe2\x12l^K\x0b\xfdy\x05\xce\xb2\xc2?', created_at=1761086058245, verified=False)
[DEBUG] datum validated
[DEBUG] About to call build_script_transaction()...
[DEBUG] build_script_transaction() ENTRY
[DEBUG] Action type: Create
[DEBUG] Datum: DIDDatum(did_id=b'eedf0b7f-29c', face_ipfs_hash=b'Qmaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa', owner=b'\xadj>\xd7*\xdcaO\xf5\xdc\xcd\x90\x9a\xce\xa2\xe2\x12l^K\x0b\xfdy\x05\xce\xb2\xc2?', created_at=1761086058245, verified=False)
[DEBUG] Validating action and datum...
[DEBUG] Validation passed
[DEBUG] Getting sender address...
[DEBUG] Parsing sender address: addr_test1vpx302mqdefht0wly42wlpjmd2rm7xr85j6sgvej8pywusc38sglh
[DEBUG] Sender address parsed OK: addr_test1vpx302mqdefht0wly42wlpjmd2rm7xr85j6sgvej8pywusc38sglh
[DEBUG] About to fetch UTxOs from blockchain...
[DEBUG] UTxOs fetched: 2 found
[DEBUG] BEFORE build_and_sign()
[DEBUG] AFTER build_and_sign()
[DEBUG] tx_raw type: <class 'pycardano.transaction.Transaction'>
[DEBUG] tx_raw: {

  'auxiliary_data': None,

  'transaction_body': {


    'auxiliary_data_hash': None,


    'certificates': None,


    'collateral': None,


    'collateral_return': None,


    'current_treasury_value': None,


    'donation': None,


    'fee': 167437,


    'inputs': OrderedSet([{



      'index': 0,



      'transaction_id': TransactionId(hex='1519bf1bf1ef5a38ccdf46cba4089e7210288f44dfa1f9d27c294bfa906dd952'),



    }, {



      'index': 1,



      'transaction_id': TransactionId(hex='1519bf1bf1ef5a38ccdf46cba4089e7210288f44dfa1f9d27c294bfa906dd952'),



    }]),


    'mint': None,


    'network_id': None,


    'outputs': [


      {



        'address': addr_test1vpx302mqdefht0wly42wlpjmd2rm7xr85j6sgvej8pywusc38sglh,



        'amount': {'coin': 1500000, 'multi_asset': {}},



        'datum': None,



        'datum_hash': None,



        'post_alonzo': False,



        'script': None,



      },


      {



        'address': addr_test1vpx302mqdefht0wly42wlpjmd2rm7xr85j6sgvej8pywusc38sglh,



        'amount': {'coin': 9980610595, 'multi_asset': {}},



        'datum': None,



        'datum_hash': None,



        'post_alonzo': False,



        'script': None,



      },


    ],


    'proposal_procedures': None,


    'reference_inputs': None,


    'required_signers': None,


    'script_data_hash': None,


    'total_collateral': None,


    'ttl': None,


    'update': None,


    'validity_start': None,


    'voting_procedures': None,


    'withdraws': None,


  },

  'transaction_witness_set': {


    'bootstrap_witness': None,


    'native_scripts': None,


    'plutus_data': None,


    'plutus_v1_script': None,


    'plutus_v2_script': None,


    'plutus_v3_script': None,


    'redeemer': None,


    'vkey_witnesses': NonEmptyOrderedSet([{



      'signature': '7f70ecb64ec07d8897a87c1f1ae4a24d460888395b5475a2635c6d3b51dbfcfa0baec594db315b269fb716ea88382bc5785c55a3c9ca516b05a97d1a8c8c4802',



      'vkey': 'b1f3e12e18904de76dee73d5fda9841bf11e3c88818334156aa79b80416fa033',



    }]),


  },

  'valid': True,

}
[DEBUG] build_script_transaction() returned: <class 'dict'> = {'type': 'script_transaction', 'action': 'Create', 'datum': {'did_id': '65656466306237662d323963', 'face_ipfs_hash': '516d6161616161616161616161616161616161616161616161616161616161616161616161616161616161616161', 'owner': 'ad6a3ed72adc614ff5dccd909acea2e2126c5e4b0bfd7905ceb2c23f', 'created_at': 1761086058245, 'verified': False}, 'redeemer': 'Create', 'status': 'built', 'tx_hash': '709f1aee86f094d8609aef984904d7c60279625a266bbd09bad2a4afddb962a5', 'tx_cbor': '84a300d90102828258201519bf1bf1ef5a38ccdf46cba4089e7210288f44dfa1f9d27c294bfa906dd952008258201519bf1bf1ef5a38ccdf46cba4089e7210288f44dfa1f9d27c294bfa906dd95201018282581d604d17ab606e5375bddf2554ef865b6a87bf1867a4b50433323848ee431a0016e36082581d604d17ab606e5375bddf2554ef865b6a87bf1867a4b50433323848ee431b0000000252e40823021a00028e0da100d9010281825820b1f3e12e18904de76dee73d5fda9841bf11e3c88818334156aa79b80416fa03358407f70ecb64ec07d8897a87c1f1ae4a24d460888395b5475a2635c6d3b51dbfcfa0baec594db315b269fb716ea88382bc5785c55a3c9ca516b05a97d1a8c8c4802f5f6', 'message': 'Create action built successfully'}
[DEBUG] About to submit transaction to blockchain...
[DEBUG] Calling transaction_submit with file: C:\Users\Admin\AppData\Local\Temp\tmpk7_rdt8y.cbor
[DEBUG] EXCEPTION in submit_transaction(): ApiError: {'error': 'Bad Request', 'message': '{"contents":{"contents":["DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")"],"tag":"TxCmdTxReadError"},"tag":"TxSubmitFail"}', 'status_code': 400}
[DEBUG] Cleaned up temp file: C:\Users\Admin\AppData\Local\Temp\tmpk7_rdt8y.cbor
[DEBUG] EXCEPTION in create_did(): ApiError: {'error': 'Bad Request', 'message': '{"contents":{"contents":["DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")"],"tag":"TxCmdTxReadError"},"tag":"TxSubmitFail"}', 'status_code': 400}

================================================================================
Γ¥î TEST FAILED: {'error': 'Bad Request', 'message': '{"contents":{"contents":["DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")","DecoderErrorDeserialiseFailure \\"Shelley Tx\\" (DeserialiseFailure 0 \\"expected list len or indef\\")"],"tag":"TxCmdTxReadError"},"tag":"TxSubmitFail"}', 'status_code': 400}
================================================================================
